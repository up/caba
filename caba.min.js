/* caba.js Canvas Fullscreen Background Image | https://github.com/up/caba | copyright 2013 Uli Preuss */ function e(a,b){var c=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),d=-1<navigator.appVersion.indexOf("Mac");this.a=b;this.element=a;this.element.width=this.a.width;this.element.height=this.a.height;this.context=this.element.getContext("2d");this.context.drawImage(this.a,0,0);c&&d&&(this.element.width=Math.min(this.element.width,300),this.element.height=Math.min(this.element.height,200))} e.prototype.blur=function(a){var b=-a,c;for(this.context.globalAlpha=0.5;b<=a;b+=2)for(c=-a;c<=a;c+=2)this.context.drawImage(this.element,c,b),0<=c&&0<=b&&this.context.drawImage(this.element,-(c-1),-(b-1));this.context.globalAlpha=1}; $(function(){$(".caba").each(function(){var a,b,c=this;a=$(this);var d=a.data("caba-blur-factor")||4,f=a.data("caba-opacity")||0.7,g=a.data("caba-src")||"";a.css({display:"inline-block","min-width":"100%","min-height":"100%",position:"fixed",top:"0",left:"0","z-index":"-2",opacity:f});a=new Image;a.src=g;a.onload=function(){b=new e(c,this);b.blur(d)}})});